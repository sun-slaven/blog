---
title: hexo页面性能优化
date: 2016-03-25 13:15:36
tags:
- hexo
categories:
- 工具技巧
---
这几天饶有兴致的利用hexo搭了一个静态博客,部署在Github(Page),搭的非常快,然后使用next主题,修改了一些样式.总算成型了,但是打开页面的时间比较慢,所以有必要对页面加载速度进行优化.
优化主要利用了七牛(对于我等屌丝而言,免费便是爹~)作为图床和CDN加速.之前对前端性能优化一窍不通,经常听说过CDN加速但是并没有彻底实践过.这次虽然碰到很多坑,但是好歹有了一些成果.就我的一些理解(有理解错误地方非常欢迎指点),希望帮助到一些小伙伴.
<!-- more -->
首先需要好好看这两篇文档:
1. [七牛融合cdn](https://support.qiniu.com/hc/kb/article/142568/)
2. [七牛的镜像存储介绍以及原理](http://blog.wpjam.com/m/qiniu-image-storage/)

##### 图床使用
所谓图床就是将源站里的一些图片上传到七牛等云空间,利用其给出的外链替代原本本地路径的使用.达到加速图片显示的目的.

我觉得用在博客配图还是很合适的
1.	先将图片资源上传到云空间
![](http://7xs8pt.com1.z0.glb.clouddn.com/hexo%E9%A1%B5%E9%9D%A2%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%966.png)
2.	本地引用资源
![](http://7xs8pt.com1.z0.glb.clouddn.com/hexo%E9%A1%B5%E9%9D%A2%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%967.png)

##### js,css等静态文件的加速
1.	利用七牛的镜像存储功能
![](http://7xs8pt.com1.z0.glb.clouddn.com/hexo%E9%A1%B5%E9%9D%A2%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%961.png)
这里设置为自己的站点
2.  查看七牛分配的默认域名
![](http://7xs8pt.com1.z0.glb.clouddn.com/hexo%E9%A1%B5%E9%9D%A2%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%962.png)
这里给的域名就是所有的外链域名,用来提供本地资源的url设置
3.	修改本地hexo的_config.xml文件
![](http://7xs8pt.com1.z0.glb.clouddn.com/hexo%E9%A1%B5%E9%9D%A2%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%963.png)
这里修改为七牛提供的外链域名+/资源名,用于将本地的css,images,js等静态资源添加cdn加速.
![](http://7xs8pt.com1.z0.glb.clouddn.com/hexo%E9%A1%B5%E9%9D%A2%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%964.png)
这里已经看到本地的静态资源已经改为访问七牛的外链.
原理大概提一下,详细看上面的链接.根据七牛提供的镜像存储功能,当利用七牛的默认域名访问时找不到相应的资源,就会去配置的镜像地址寻找相应的资源,找到后就会显示并上传到云空间上,第一次访问的过程会稍微长点,但是以后每次再访问相同的资源,就会直接访问云空间的资源,不再去寻找源站的资源,而访问云空间的资源会自动利用到CDN网络加速,切身体会是,原来接近一秒的资源请求变成了几十毫秒.

当然,利用七牛的镜像功能会有个小问题,就是当已经被云端化的本地资源修改时,它并不会自动将最新的资源同步,所以需要将云空间的相应资源删除.这个过程有相应的插件可以帮你完成,[查看官网插件](http://developer.qiniu.com/resource/community.html#plugin).

说一下自己的一个坑,七牛提供的默认域名并不是很稳定,![](http://7xs8pt.com1.z0.glb.clouddn.com/hexo%E9%A1%B5%E9%9D%A2%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%965.png)
坑了我大半天,我还以为自己的理解或者设置哪里出错了,找了半天找不出来就直接发工单询问了,才知道被攻击了.......!!!!
自定义域名还要账户余额10元,主要是域名备案.我就没设置,不过问了官方,说自定义域名会好很多.
